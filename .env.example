# === Domain Configuration ===
# Base domain for the deployment
# Required DNS records (all pointing to your VPS IP):
#   yourdomain.com       A    YOUR_VPS_PUBLIC_IP
#   app.yourdomain.com   A    YOUR_VPS_PUBLIC_IP
#   turn.yourdomain.com  A    YOUR_VPS_PUBLIC_IP
DOMAIN=yourdomain.com

# === Bun App Configuration ===
BUN_PORT=3000
NODE_ENV=production

# === STUN Servers ===
# Comma-separated list of STUN server URLs
# Used for NAT traversal and discovering public IP
STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302

# === coturn TURN Server Configuration ===
# All fields required together or all omitted
# TURN provides relay when direct P2P connection fails (restrictive networks)

# Authentication credentials
TURN_USERNAME=webrtc
TURN_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD_MIN_24_CHARS

# Realm (should match your domain)
TURN_REALM=yourdomain.com

# sturn listening port
STURN_PORT=5439

# External IP address of your VPS (for coturn ICE candidates)
# Find with: curl ifconfig.me
EXTERNAL_IP=YOUR_VPS_PUBLIC_IP

# === SSL Certificates (Let's Encrypt) ===
# Email for Let's Encrypt notifications and recovery
LETSENCRYPT_EMAIL=your@email.com

# === DPI Mitigation Architecture ===
# This setup uses nginx stream module with SNI routing on port 443:
#   - app.yourdomain.com:443   → nginx → Bun app (WebSocket signaling)
#   - turn.yourdomain.com:443  → nginx → coturn:5349 (TURN/TLS)
#   - yourdomain.com:443       → nginx → static cover website
# All traffic appears as HTTPS to DPI systems
