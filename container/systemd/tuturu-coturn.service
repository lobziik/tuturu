[Unit]
Description=coturn TURN/STUN server for tuturu
Documentation=https://github.com/lobziik/tuturu
After=tuturu-certbot.service tuturu-init.service tuturu-redis.service network.target
Requires=tuturu-certbot.service tuturu-init.service
# Soft dependency on Redis - works without it (credentials just expire naturally)
Wants=tuturu-redis.service

[Service]
Type=simple
ExecStart=/usr/bin/turnserver -c /etc/coturn/turnserver.conf
Restart=always
RestartSec=5

# Security hardening
NoNewPrivileges=true
ProtectSystem=strict
ReadWritePaths=/var/lib/coturn /run

StandardOutput=journal+console
StandardError=journal+console

[Install]
WantedBy=multi-user.target
