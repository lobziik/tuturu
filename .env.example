# === Domain Configuration ===
# Base domain for the deployment
# Required DNS records (all pointing to your VPS IP):
#   yourdomain.com       A    YOUR_VPS_PUBLIC_IP
#   a.yourdomain.com   A    YOUR_VPS_PUBLIC_IP
#   t.yourdomain.com  A    YOUR_VPS_PUBLIC_IP
DOMAIN=yourdomain.com

# === Bun App Configuration ===
BUN_PORT=3000
NODE_ENV=production

# === STUN Servers ===
# Comma-separated list of STUN server URLs
# Used for NAT traversal and discovering public IP
STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302

# === coturn TURN Server Configuration ===
# TURN_SECRET + DOMAIN required together or both omitted
# TURN provides relay when direct P2P connection fails (restrictive networks)

# TURN secret for ephemeral HMAC credentials (auto-generated if not set)
# Server generates time-limited credentials, coturn validates via HMAC-SHA1
# Minimum 32 characters for security
# TURN_SECRET=your-secret-at-least-32-characters-long

# TURNS listening port (TLS)
STURN_PORT=5349

# to force relay mode (via ice)
FORCE_RELAY=false

# External IP address of your VPS (for coturn ICE candidates)
# Find with: curl ifconfig.me
EXTERNAL_IP=YOUR_VPS_PUBLIC_IP

# === SSL Certificates (Let's Encrypt) ===
# Email for Let's Encrypt notifications and recovery
LETSENCRYPT_EMAIL=your@email.com

# === DPI Mitigation Architecture ===
# This setup uses nginx stream module with SNI routing on port 443:
#   - a.yourdomain.com:443   → nginx → Bun app (WebSocket signaling)
#   - t.yourdomain.com:443  → nginx → coturn:5349 (TURN/TLS)
#   - yourdomain.com:443       → nginx → static cover website
# All traffic appears as HTTPS to DPI systems
